{% extends "index.html" %}{% block content%}
<script>
  function showDiv() {
    document.getElementById('loading').style.display = 'block';
    // const button = document.getElementById('submitButton');
    // button.disabled = true;
  }
</script>
<!-- prettier-ignore -->
{% with messages = get_flashed_messages() %} {% if messages %} {% for message in messages %}
<div class="alert alert-info mt-4" role="alert">
  <i class="fas fa-skull-crossbones"></i>
  {{ message }}
</div>
{% endfor %} {% endif%} {% endwith %}

<h1 class="mt-5" style="padding-top: 20px">Image Classification Inference</h1>

<div>
  <form class="mt-3" action="#" method="POST" enctype="multipart/form-data">
    <label class="form-check-label" for="exampleCheck1">Select an image</label
    ><br />
    <input type="file" id="image" name="input_image" accept="" /><br /><br />
    <div>
      <button
        id="submitButton"
        type="submit"
        href="image_inference"
        class="btn btn-outline-primary mt-2"
        onclick="showDiv()"
      >
        Classify Image
      </button>
    </div>
    <div id="loading" style="display: none; padding-left: 10px">
      <div class="spinner-border m-5" role="status">
        <span class="sr-only">Loading...</span>
      </div>
    </div>

    {% if file_name and prediction %}
    <div
      class="row"
      style="padding-left: 50px; padding-top: 80px; padding-right: 50px"
    >
      <div class="col-sm-6">
        <div class="my-3">
          <span class="badge badge-pill badge-info"><h7>Input Image</h7></span>
        </div>
        <img
          src="{{file_name}}"
          class="card-img-top shadow p-6 mb-5 bg-white rounded"
          height="350px"
          width="100px"
        />
      </div>
      <div class="col-sm-6">
        <div class="my-3">
          <span class="badge badge-pill badge-info"><h7>Prediction</h7></span>
        </div>
        <label
          class="form-control shadow p-6 mb-5 bg-white rounded"
          id="output"
          rows="1"
          placeholder=""
          style="text-align: center; outline-color: blue; width: 25rem"
          >{{ prediction }}</label
        >
      </div>
    </div>

    {% endif %}
  </form>
</div>
{% endblock %}
